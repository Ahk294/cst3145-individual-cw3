(function(){"use strict";var t={4562:function(t,s,a){var e=a(144),o=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("nav",{staticClass:"navbar fixed-top navbar-expand-lg navbar-dark bg-dark py-3"},[s("div",{staticClass:"container"},[s("a",{staticClass:"navbar-brand",attrs:{href:"#"},on:{click:t.showCheckoutPage}},[t._v("After School Activities")]),t._m(0),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav mb-2 mb-lg-0 w-100"},[s("li",{staticClass:"nav-item ms-auto me-auto w-75"},[s("div",{staticClass:"d-flex"},[t.showLessonPage?s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search","aria-label":"Search"},domProps:{value:t.searchTerm},on:{keyup:t.search,input:function(s){s.target.composing||(t.searchTerm=s.target.value)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{disabled:"",type:"search",placeholder:"Search","aria-label":"Search"},domProps:{value:t.searchTerm},on:{keyup:t.search,input:function(s){s.target.composing||(t.searchTerm=s.target.value)}}})])]),s("li",{staticClass:"nav-item"},[t.showLessonPage?s("a",{staticClass:"nav-link active",attrs:{"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasFilter","aria-controls":"offcanvasFilter"}},[s("i",{staticClass:"fa-solid fa-filter"}),t._v(" Show Filter ")]):s("a",{staticClass:"nav-link",attrs:{disabled:"","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasFilter","aria-controls":"offcanvasFilter"}},[s("i",{staticClass:"fa-solid fa-filter"}),t._v(" Show Filter ")])]),s("li",{staticClass:"nav-item"},[t.showLessonPage?s("button",{staticClass:"btn btn-outline-light",attrs:{disabled:0==t.cart.length,type:"submit"},on:{click:t.showCheckoutPage}},[s("i",{staticClass:"fa-solid fa-cart-shopping"}),t._v(" Cart ("+t._s(t.cart.length)+") ")]):s("button",{staticClass:"btn btn-outline-light",attrs:{type:"submit"},on:{click:t.showCheckoutPage}},[s("i",{staticClass:"fa-solid fa-home"}),t._v(" Home ")])])])])])]),s("div",{staticClass:"offcanvas offcanvas-start",attrs:{tabindex:"-1",id:"offcanvasFilter","aria-labelledby":"offcanvasFilterLabel"}},[t._m(1),s("div",{staticClass:"offcanvas-body text-start"},[s("div",[s("p",[t._v("Filter your results by selecting one of the following options")]),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-check-input",attrs:{type:"radio",name:"filter",id:"subject",checked:""},domProps:{value:"subject",checked:t._q(t.sortBy,"subject")},on:{change:function(s){t.sortBy="subject"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"subject"}},[t._v(" Subject ")])]),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-check-input",attrs:{type:"radio",name:"filter",id:"location"},domProps:{value:"location",checked:t._q(t.sortBy,"location")},on:{change:function(s){t.sortBy="location"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"location"}},[t._v(" Location ")])]),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-check-input",attrs:{type:"radio",name:"filter",id:"price"},domProps:{value:"price",checked:t._q(t.sortBy,"price")},on:{change:function(s){t.sortBy="price"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"price"}},[t._v(" Price ")])]),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-check-input",attrs:{type:"radio",name:"filter",id:"spaces"},domProps:{value:"spaces",checked:t._q(t.sortBy,"spaces")},on:{change:function(s){t.sortBy="spaces"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"spaces"}},[t._v(" Availability ")])])]),s("hr"),s("div",[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortRule,expression:"sortRule"}],staticClass:"form-check-input",attrs:{type:"radio",name:"filterRule",id:"ascending",checked:""},domProps:{value:"ascending",checked:t._q(t.sortRule,"ascending")},on:{change:function(s){t.sortRule="ascending"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"ascending"}},[t._v(" Ascending ")])]),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortRule,expression:"sortRule"}],staticClass:"form-check-input",attrs:{type:"radio",name:"filterRule",id:"descending"},domProps:{value:"descending",checked:t._q(t.sortRule,"descending")},on:{change:function(s){t.sortRule="descending"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"descending"}},[t._v(" Descending ")])])])])]),t._m(2),s("div",{staticClass:"container mt-5"},[t.searchStatus?s("div",[s("div",{staticClass:"row"},[1!=t.searchArr.length?s("h1",{staticClass:"display-5 ms-4 mt-5"},[t._v("Displaying "+t._s(t.searchArr.length)+" Results")]):s("h1",{staticClass:"display-5 ms-4 mt-5"},[t._v("Displaying "+t._s(t.searchArr.length)+" Result")]),t._l(t.searchArr,(function(a){return s("div",{key:a._id,staticClass:"col-12 col-md-6 col-lg-4",attrs:{id:"lessons"}},[s("lesson",{attrs:{lesson:a,cart:t.cart},on:{addToCart:t.addToCart}})],1)}))],2)]):s("div",[t.showLessonPage?s("div",[s("div",{staticClass:"row"},[s("h1",{staticClass:"display-5 text-center mt-5",domProps:{textContent:t._s(t.sitename)}}),t._l(t.sortedLessons,(function(a){return s("div",{key:a._id,staticClass:"col-12 col-md-6 col-lg-4",attrs:{id:"lessons"}},[s("lesson",{attrs:{lesson:a,cart:t.cart},on:{addToCart:t.addToCart}})],1)}))],2)]):s("div",[s("div",{staticClass:"row"},[s("h1",{staticClass:"display-5 ms-4 mt-5"},[t._v("Number of items in cart: "+t._s(t.cart.length))]),t._l(t.cart,(function(a,e){return s("div",{key:e+" "+a._id,staticClass:"col-12 col-md-6 col-lg-4"},[s("checkout",{attrs:{lesson:a,index:e,cart:t.cart},on:{removeFromCart:t.removeFromCart}})],1)}))],2),s("hr"),s("h1",{staticClass:"display-6 text-center pt-2"},[t._v("Checkout")]),s("div",{staticClass:"row"},[s("div",{staticClass:"mb-3 col-12 col-md-6 col-lg-6"},[s("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"Fullname"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})]),s("div",{staticClass:"mb-3 col-12 col-md-6 col-lg-6"},[s("label",{staticClass:"form-label",attrs:{for:"phone"}},[t._v("Phone")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form-control",attrs:{type:"number",id:"phone",placeholder:"971501234567"},domProps:{value:t.phone},on:{input:function(s){s.target.composing||(t.phone=s.target.value)}}})]),s("div",{staticClass:"mb-3 d-flex justify-content-center"},[t.validateForm?s("button",{staticClass:"btn btn-success",attrs:{id:"btn_checkout","data-bs-toggle":"modal","data-bs-target":"#orderConfirm"},on:{click:t.order}},[t._v(" Checkout ")]):s("button",{staticClass:"btn btn-success",attrs:{disabled:"",id:"btn_checkout"}},[t._v(" Checkout ")])])])])])]),t._m(3)])},i=[function(){var t=this,s=t._self._c;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"offcanvas-header"},[s("h5",{staticClass:"offcanvas-title display-5",attrs:{id:"offcanvasFilterLabel"}},[t._v("Filter")]),s("button",{staticClass:"btn-close text-reset",attrs:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"modal fade",attrs:{id:"orderConfirm",tabindex:"-1","aria-labelledby":"orderConfirmLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"orderConfirmLabel"}},[t._v("Order Confirmed")]),s("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),s("div",{staticClass:"modal-body"},[s("p",[t._v("Your order has been placed! Thank you and visit again!")])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Close")]),s("button",{staticClass:"btn btn-dark",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Okay")])])])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"footer text-center p-4 bg-secondary"},[s("a",{staticClass:"text-white fw-bold",staticStyle:{"text-decoration":"none"},attrs:{href:"https://www.linkedin.com/in/abdul-haseeb-khan-b1020815a/"}},[t._v("Abdul Haseeb Khan - M00792907")])])}],r=(a(7658),function(){var t=this,s=t._self._c;return s("div",{staticClass:"card m-4 lesson"},[s("img",{staticClass:"card-img-top",attrs:{src:t.lesson.image}}),s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title text-center"},[t._v(t._s(t.lesson.subject))]),s("hr"),s("p",{staticClass:"card-text"},[s("i",{staticClass:"fa-solid fa-location-dot"}),t._v(" Location: "+t._s(t.lesson.location)+" ")]),s("p",{staticClass:"card-text"},[s("i",{staticClass:"fa-solid fa-tag"}),t._v(" Price: AED "+t._s(t.lesson.price)+" ")]),s("p",{staticClass:"card-text"},[s("i",{staticClass:"fa-solid fa-user"}),t._v(" Available Spaces: "+t._s(t.lesson.spaces)+" ")]),s("div",{staticClass:"d-flex"},[t.canAddToCart(t.lesson)?s("button",{staticClass:"btn btn-outline-dark ms-auto",attrs:{id:"btn_add"},on:{click:function(s){return t.addLesson(t.lesson)}}},[t._v(" Add to Cart ")]):s("button",{staticClass:"btn btn-danger ms-auto",attrs:{disabled:"disabled"}},[t._v(" Add to Cart ")])])])])}),n=[],c={name:"Lesson",props:["lesson","cart"],methods:{canAddToCart(t){return t.spaces>this.cartCount(t._id)},cartCount(t){let s=0;for(let a=0;a<this.cart.length;a++)this.cart[a]===t&&s++;return s},addLesson(t){this.$emit("addToCart",t)}}},l=c,d=a(1001),h=(0,d.Z)(l,r,n,!1,null,"8d7bb48a",null),u=h.exports,m=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card m-4"},[s("img",{staticClass:"card-img-top",attrs:{src:t.lesson.image}}),s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title text-center"},[t._v(t._s(t.lesson.subject))]),s("hr"),s("p",{staticClass:"card-text"},[s("i",{staticClass:"fa-solid fa-location-dot"}),t._v(" Location: "+t._s(t.lesson.location)+" ")]),s("p",{staticClass:"card-text"},[s("i",{staticClass:"fa-solid fa-tag"}),t._v(" Price: AED "+t._s(t.lesson.price)+" ")]),s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn btn-outline-danger ms-auto",attrs:{id:"btn_remove"},on:{click:function(s){return t.removeLesson(t.lesson._id,t.index)}}},[t._v(" Remove ")])])])])},p=[],v={name:"Checkout",props:["lesson","index","cart"],methods:{removeLesson(t,s){this.$emit("removeFromCart",t,s)}}},f=v,b=(0,d.Z)(f,m,p,!1,null,null,null),C=b.exports,g={name:"App",components:{Lesson:u,Checkout:C},data(){return{sitename:"After School Activities",sortBy:"subject",sortRule:"ascending",name:"",phone:"",searchTerm:"",showLessonPage:!0,searchStatus:!1,cartLength:!1,lessons:[],duplicate_lessons:[],cart:[],searchArr:[]}},methods:{order(){let t=[...new Map(this.cart.map((t=>[t["_id"],t]))).values()],s=[];t.forEach((t=>{let a={};this.duplicate_lessons.forEach((s=>{t._id===s._id&&(a={id:t._id,lesson_name:t.subject,spaces:s.spaces-t.spaces,rem_spaces:s.spaces-(s.spaces-t.spaces)})})),s.push(a)}));let a={name:this.name,phone:this.phone,lessons:s,total_qty:this.cart.length};a.lessons.forEach((t=>{t["lesson_id"]=t["_id"],delete t["_id"]})),fetch("http://localhost:3000/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((t=>t.json())).then((t=>{console.log({Success:t})})),s.forEach((t=>{fetch("http://localhost:3000/lessons/"+t["id"],{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:t["rem_spaces"]})}).then((t=>t.json())).then((t=>{console.log({Success:t}),this.cart=[]}))}))},search(){this.searchArr=[],this.searchStatus=!0;let t=this.searchTerm.toLowerCase();""==t&&(this.searchStatus=!1);let s=this;fetch("http://localhost:3000/lessons/"+t).then((function(t){t.json().then((function(t){s.searchArr=t,console.log(t)}))}))},addToCart(t){t.spaces--,this.cart.push(t)},showCheckoutPage(){this.showLessonPage=!this.showLessonPage,!0===this.showLessonPage&&this.searchTerm?this.searchStatus=!0:this.searchStatus=!1},removeFromCart(t,s){let a=this.cart,e=this.lessons;a.splice(s,1);for(let o=0;o<e.length;o++)e[o]["_id"]==t&&(e[o].spaces=e[o].spaces+1);0===this.cart.length&&(this.showLessonPage=!0,this.searchTerm="")}},computed:{sortedLessons(){let t=this.lessons.slice(0);return"price"===this.sortBy?"ascending"===this.sortRule?t.sort(((t,s)=>t.price-s.price)):t.sort(((t,s)=>s.price-t.price)):"spaces"===this.sortBy?"ascending"===this.sortRule?t.sort(((t,s)=>t.spaces-s.spaces)):t.sort(((t,s)=>s.spaces-t.spaces)):"subject"===this.sortBy?"ascending"===this.sortRule?t.sort(((t,s)=>t.subject>s.subject?1:-1)):t.sort(((t,s)=>t.subject<s.subject?1:-1)):"location"===this.sortBy?"ascending"===this.sortRule?t.sort(((t,s)=>t.location>s.location?1:-1)):t.sort(((t,s)=>t.location<s.location?1:-1)):void 0},validateForm(){return/^(?!\s*$)[a-zA-Z.+\s'-]+$/.test(this.name)&&/^(?!\s*$)[0-9.+\s'-]+$/.test(this.phone)&&10===this.phone.length&&this.cart.length>0}},created:function(){console.log("requesting data from server ...");let t=this;fetch("http://localhost:3000/lessons").then((function(s){s.json().then((function(s){t.lessons=s,console.log(s)}))})),fetch("http://localhost:3000/lessons").then((function(s){s.json().then((function(s){t.duplicate_lessons=s,console.log(s)}))}))}},_=g,y=(0,d.Z)(_,o,i,!1,null,null,null),k=y.exports;e.ZP.config.productionTip=!1,new e.ZP({render:t=>t(k)}).$mount("#app")}},s={};function a(e){var o=s[e];if(void 0!==o)return o.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(s,e,o,i){if(!e){var r=1/0;for(d=0;d<t.length;d++){e=t[d][0],o=t[d][1],i=t[d][2];for(var n=!0,c=0;c<e.length;c++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](e[c])}))?e.splice(c--,1):(n=!1,i<r&&(r=i));if(n){t.splice(d--,1);var l=o();void 0!==l&&(s=l)}}return s}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[e,o,i]}}(),function(){a.d=function(t,s){for(var e in s)a.o(s,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};a.O.j=function(s){return 0===t[s]};var s=function(s,e){var o,i,r=e[0],n=e[1],c=e[2],l=0;if(r.some((function(s){return 0!==t[s]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(c)var d=c(a)}for(s&&s(e);l<r.length;l++)i=r[l],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},e=self["webpackChunkcst3145_individual_cw3"]=self["webpackChunkcst3145_individual_cw3"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=a.O(void 0,[998],(function(){return a(4562)}));e=a.O(e)})();
//# sourceMappingURL=app.fb36e987.js.map